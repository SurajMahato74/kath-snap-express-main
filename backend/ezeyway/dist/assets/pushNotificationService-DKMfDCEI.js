var c=Object.defineProperty;var f=(o,i,t)=>i in o?c(o,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[i]=t;var a=(o,i,t)=>f(o,typeof i!="symbol"?i+"":i,t);import{f as r,C as s}from"./index-BIW-6QJO.js";class l{constructor(){a(this,"isInitialized",!1)}async initialize(){if(!this.isInitialized)try{await r.initialize(),await r.sendTokenToBackend(),this.isInitialized=!0,console.log("🔔 Push Notification Service initialized")}catch(i){console.error("❌ Push notification service failed:",i)}}async showOrderNotification(i,t,n){if(console.log("🔔 Order notification triggered:",{orderNumber:i,amount:t,orderId:n}),s.isNativePlatform()){console.log("📱 Mobile: FCM will handle notification");return}if("Notification"in window&&Notification.permission==="granted"){const e=new Notification("🔔 New Order!",{body:`Order #${i} - ₹${t}`,icon:"/favicon.ico",tag:`order-${n}`,requireInteraction:!0});e.onclick=()=>{window.focus(),window.dispatchEvent(new CustomEvent("showOrderModal",{detail:{orderId:n,orderNumber:i,amount:t}})),e.close()}}}async requestPermissions(){return s.isNativePlatform()?!0:"Notification"in window&&Notification.permission==="default"?await Notification.requestPermission()==="granted":"Notification"in window&&Notification.permission==="granted"}}const u=new l;export{u as pushNotificationService};
