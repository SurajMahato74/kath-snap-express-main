const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-BIW-6QJO.js","assets/index.css"])))=>i.map(i=>d[i]);
import{C as s,_ as l}from"./index-BIW-6QJO.js";class m{async saveVendorLogin(e,t){try{if(s.isNativePlatform()){const{Preferences:r}=await l(async()=>{const{Preferences:o}=await import("./index-BIW-6QJO.js").then(n=>n.i);return{Preferences:o}},__vite__mapDeps([0,1]));await r.set({key:"vendor_token",value:e}),await r.set({key:"vendor_user",value:JSON.stringify(t)}),await r.set({key:"vendor_time",value:Date.now().toString()})}else localStorage.setItem("vendor_token",e),localStorage.setItem("vendor_user",JSON.stringify(t)),localStorage.setItem("vendor_time",Date.now().toString());console.log("‚úÖ Vendor login saved")}catch(r){console.error("Save vendor login failed:",r)}}async getVendorAuth(){try{let e=null,t=null,r=null;if(s.isNativePlatform()){const{Preferences:a}=await l(async()=>{const{Preferences:d}=await import("./index-BIW-6QJO.js").then(_=>_.i);return{Preferences:d}},__vite__mapDeps([0,1])),c=await a.get({key:"vendor_token"}),u=await a.get({key:"vendor_user"}),v=await a.get({key:"vendor_time"});e=c.value,t=u.value,r=v.value}else e=localStorage.getItem("vendor_token"),t=localStorage.getItem("vendor_user"),r=localStorage.getItem("vendor_time");if(!e||!t||!r)return null;const o=parseInt(r),n=30*24*60*60*1e3;if(Date.now()-o>n)return await this.clearVendorAuth(),null;const i=JSON.parse(t);return console.log("‚úÖ Vendor auth found:",i.username),{token:e,user:i}}catch(e){return console.error("Get vendor auth failed:",e),null}}async clearVendorAuth(){try{if(s.isNativePlatform()){const{Preferences:e}=await l(async()=>{const{Preferences:t}=await import("./index-BIW-6QJO.js").then(r=>r.i);return{Preferences:t}},__vite__mapDeps([0,1]));await e.remove({key:"vendor_token"}),await e.remove({key:"vendor_user"}),await e.remove({key:"vendor_time"})}else localStorage.removeItem("vendor_token"),localStorage.removeItem("vendor_user"),localStorage.removeItem("vendor_time");console.log("üóëÔ∏è Vendor auth cleared")}catch(e){console.error("Clear vendor auth failed:",e)}}async isVendorLoggedIn(){var t;const e=await this.getVendorAuth();return e!==null&&((t=e.user)==null?void 0:t.user_type)==="vendor"}}const f=new m;export{f as simplePersistentAuth};
